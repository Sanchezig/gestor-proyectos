<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROD - WTW - Gestor de Proyectos</title>
	<link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.49.1/dist/umd/supabase.js"></script>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-logo">WTW</div>
            <div class="sidebar-subtitle">Gestor de iniciativas & dailys</div>
            <button class="btn-new-project" onclick="openNewProjectModal()">‚ú® Nuevo proyecto</button>

            <div class="sidebar-content">
                <div class="sidebar-title">Activos</div>
                <ul class="sidebar-list" id="projectsListActive"></ul>

                <div class="sidebar-title">Completados</div>
                <ul class="sidebar-list" id="projectsListCompleted"></ul>
            </div>

            <!-- Control de usuario -->
            <div class="user-control">
                <div class="user-icon">üë§</div>
                <div class="user-info">
                    <div class="user-name" id="currentUserDisplay">NN</div>
                    <button class="user-change-btn" onclick="changeUser()">Cambiar</button>
                </div>
            </div>
        </div>


        <div class="main-content">
            <div class="toolbar">
                <div class="toolbar-left">
                    <h2 id="viewTitle">Daily</h2>
                    <div class="toolbar-caption">Seguimiento semanal y comentarios r√°pidos por proyecto</div>
                </div>
                <div class="view-toggle">
                    <button class="active" onclick="switchView('daily')">üìÖ Daily</button>
                    <button onclick="switchView('ficha')">üìã Ficha Proyecto</button>
                    <button onclick="switchView('equipo')">üë• Equipo</button>
					<button onclick="switchView('dashboard')">üìàDashboard</button>
                </div>
            </div>

            <div class="content-area">
                <div class="daily-view active" id="dailyView">
                    <div class="week-navigation">
                        <button class="week-nav-btn" onclick="previousWeek()">‚Üê Semana anterior</button>
                        <div class="week-info" id="weekInfo"></div>
                        <button class="week-nav-btn" onclick="nextWeek()">Semana siguiente ‚Üí</button>
                    </div>

                    <div class="daily-mode-toggle">
                        <button id="btnDailyActivos" class="active"
                            onclick="setDailyViewMode('activos')">Activos</button>
                        <button id="btnDailyCompletados" onclick="setDailyViewMode('completados')">Completados</button>
                    </div>

                    <div id="dailyTableContainer"></div>
                </div>

                <div class="project-ficha" id="fichaView"></div>

                <!-- VISTA EQUIPO -->
                <div class="team-view" id="teamView"></div>
				<div class="dashboard-view" id="dashboardView"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="dailyModal">
        <div class="modal-content">
            <div class="modal-title" id="dailyModalTitle">Nuevo comentario Daily</div>
            <div class="form-group">
                <label>Proyecto</label>
                <select id="commentProjectSelect" onchange="updateAvailableTasks()">
                    <option value="">Selecciona un proyecto...</option>
                </select>
            </div>
            <div class="form-group">
                <label>Responsable</label>
                <select id="commentResponsible">
                    <option value="">Selecciona...</option>
                    <option value="IS">IS</option>
                    <option value="DH">DH</option>
                    <option value="HR">HR</option>
                    <option value="PU">PU</option>
                    <option value="AR">AR</option>
                    <option value="MR">MR</option>
                </select>
            </div>
            <div class="form-group">
                <label>Urgencia</label>
                <select id="commentUrgency">
                    <option value="Normal">Normal</option>
                    <option value="Alta">Alta</option>
                    <option value="M√°xima">M√°xima</option>
                </select>
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="commentIncident">
                    Tiene incidencia
                </label>
            </div>
            <div class="form-group">
                <label>Comentario</label>
                <textarea id="commentText" placeholder="Escribe tu comentario..."></textarea>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="saveDailyComment()">Guardar</button>
                <button class="btn btn-cancel" onclick="closeDailyModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <div class="modal" id="commentsListModal">
        <div class="modal-content">
            <div class="modal-title">Comentarios del d√≠a</div>
            <div id="commentsListContainer"></div>
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="openAddCommentFromList()">A√±adir m√°s</button>
                <button class="btn btn-cancel" onclick="closeCommentsListModal()">Cerrar</button>
            </div>
        </div>
    </div>

    <div class="modal" id="projectModal">
        <div class="modal-content modal-project">
            <div class="modal-title">Crear nuevo proyecto</div>
            <div class="form-group">
                <label>Nombre de la iniciativa</label>
                <input type="text" id="projectName" placeholder="Ej: Automatizaci√≥n de Claims...">
            </div>
            <div class="form-group">
                <label>Fecha inicio</label>
                <input type="date" id="projectStartDate">
            </div>
            <div class="form-group">
                <label>Fecha fin</label>
                <input type="date" id="projectEndDate">
            </div>
            <div class="form-group">
                <label>Fase del proyecto</label>
                <select id="projectPhase">
                    <option value="Idea">Idea</option>
                    <option value="En Progreso">En Progreso</option>
                    <option value="On Hold">On Hold</option>
                    <option value="Cerrado">Cerrado</option>
                </select>
            </div>
            <div class="form-group">
                <label>Stakeholders</label>
                <input type="text" id="projectStakeholders" placeholder="Ej: Juan (Product Owner), Mar√≠a (IT), ...">
            </div>
            <div class="form-group">
                <label>Ahorro (‚Ç¨)</label>
                <input type="number" id="volume" placeholder="Ej: 50000" min="0" step="0.01">
            </div>
            <div class="form-group">
                <label>Ahorro (FTE)</label>
                <input type="number" id="fte" placeholder="Ej: 1.5" min="0" step="0.1">
            </div>

            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="saveNewProject()">Crear proyecto</button>
                <button class="btn btn-cancel" onclick="closeProjectModal()">Cancelar</button>
            </div>
        </div>
    </div>

	<script src="config.js"></script>
	<script src="app.js"></script>
</body>

</html>